@import '../../prefrix';
@import 'breakpoints';

//FIXME: Remove this, debug
.outside {
  height: 80px;
  word-break: break-all;
  background-color:#ecd8d8;
  outline: 1px solid #4c0808;
}

@mixin grid-container($prefix) {
  #{$prefix}-container {
    margin-left: auto;
    margin-right: auto;
    width: 100%;
    max-width: 198rem;

    //FIXME: Remove this, debug
    font-size: 16px;
    background-color:#ef5252;
  }

}

@mixin grid-row($prefix) {
  #{$prefix}-row {
    display:flex;
    flex-wrap: wrap;

    //FIXME: Remove this, debug
    background-color: white;
    outline: 1px dashed blue;
  }
}

@mixin grid-container-breakpoints($prefix, $breakpoints) {

  @each $key, $values in $breakpoints {

    $breakpoint-margin: map-get($values, 'margin');
    $breakpoint-width: map-get($values, 'width');

    @media (min-width:  $breakpoint-width ) {
        #{$prefix}-container {
            padding-right: $breakpoint-margin;
            padding-left: $breakpoint-margin;
        }
    }
  }
}

@mixin grid-col-sizes($breakpoints) {

  // Size
  @each $sizes, $values in $breakpoints {
     $breakpoint-columns: map-get($values, 'columns');
     $breakpoint-gutter: map-get($values, 'gutter');
     $breakpoint-padding: map-get($values, 'padding');
     $breakpoint-width: map-get($values, 'width');

    //  Each column for everysize
    @for $i from 1 through $breakpoint-columns {

      #{$prefix}-col-#{$sizes}-#{$i} {
        display: block;
        flex-grow: 0;
        flex-shrink: 0;
        flex-basis: 100%;
        max-width: 100%;
      }

      @media (min-width:  $breakpoint-width ) {
        #{$prefix}-col-#{$sizes}-#{$i} {
          @include grid-col-size($breakpoint-columns, $i);
          @include grid-gutters($breakpoint-gutter, $breakpoint-padding);

          //FIXME: Remove this, debug
          background-color: #ffafaf;
          outline: 1px solid red;

        }
      }
    }
  }
}

@mixin grid-col-size($columns, $i) {
  display: block;
  flex-grow: 0;
  flex-shrink: 0;
  flex-basis: percentage(($i / $columns));
  max-width: percentage(($i / $columns));
}

@mixin grid-gutters($gutter, $breakpoint-padding) {
  $padding: $gutter / 2 + $breakpoint-padding;
  padding: 0 $padding;
}

//Gutterless col sizes
@mixin grid-gutterless-col($breakpoints) {

  // Size
  @each $sizes, $values in $breakpoints {
    $breakpoint-columns: map-get($values, 'columns');
    $breakpoint-gutter: map-get($values, 'gutter');
    $breakpoint-padding: map-get($values, 'padding');
    $breakpoint-width: map-get($values, 'width');

   //  Each column for everysize
    @for $i from 1 through $breakpoint-columns {

      @media (min-width:  $breakpoint-width ) {
        #{$prefix}-col-#{$sizes}-#{$i}.gutterless {
          @include grid-col-size($breakpoint-columns, $i);
          @include grid-gutters($breakpoint-gutter, $breakpoint-padding);
          margin: 0;

          //FIXME: Remove this, debug
          background-color: #ffafaf;
          outline: 1px solid red;
        }
      }
    }
  }
}

@mixin grid-offset-col($breakpoints) {

  @each $sizes, $values in $breakpoints {
    $breakpoint-columns: map-get($values, 'columns');
    $breakpoint-gutter: map-get($values, 'gutter');
    $breakpoint-padding: map-get($values, 'padding');
    $breakpoint-width: map-get($values, 'width');

   //  Each column for everysize
    @for $i from 1 through $breakpoint-columns {

      @media (min-width:  $breakpoint-width ) {
        #{$prefix}-col-#{$sizes}-#{$i}-offset {
          @include grid-offset($breakpoint-columns, $i);
        }
      }
    }
  }
}

@mixin grid-offset($columns, $i) {
  $index: $i;
  margin-left: percentage(($index / $columns));
}